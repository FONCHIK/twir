---
import TwitchAvatar from './hero-chat-avatar.astro';
import { chatMessages } from './hero-chat-messager.js';

import TwirLogo from '@/assets/twir.svg?component';
import ChatMessageTail from '@/assets/chat-message-tail.svg?component';
---

<div
  class="flex flex-col justify-end gap-[12px] w-full max-h-[540px] xl:max-w-lg relative -top-5"
  style="-webkit-mask-image: linear-gradient(0deg, #D9D9D9 75%, rgba(217, 217, 217, 0) 100%)">
  {chatMessages.map((message) => (
    <div class="flex items-start gap-[16px] w-full">
      {message.type === 'message' && message.sender === 'bot' && (
        <TwirLogo class="w-9 h-9 flex-shrink-0" />
      )}
      {message.type === 'message' && message.sender === 'user' && (
        <TwitchAvatar class="h-9 w-9 flex-shrink-0" />
      )}
      {message.type === 'message' && (
        <div
          class:list={[
            'flex flex-col px-[16px] py-[10px] rounded-lg rounded-tl-none text-white relative',
            {
              'bg-[#534FDB]': message.sender === 'bot',
              'bg-[#232427]': message.sender === 'user',
            },
          ]}>
          <ChatMessageTail
            class:list={[
              'absolute h-[21px] top-0 -left-[10px]',
              {
                'fill-[#534FDB]': message.sender === 'bot',
                'fill-[#232427]': message.sender === 'user',
              },
            ]}
          />
          <span set:html={message.message} />
        </div>
      )}
      {message.type === 'redemption' && (
        <div
          class="
						font-normal flex flex-col py-3 px-5 bg-[#4C47F5]/[.15] gap-2 rounded-md relative w-full
					">
          <span class="text-sm leading-normal text-white/90" set:html={message.title} />
          <span class="font-semibold">{message.input}</span>
          <span class="absolute bg-[#4C47F5] w-[2px] rounded-sm h-[calc(100%-24px)] left-0" />
        </div>
      )}
    </div>
  ))}
</div>
